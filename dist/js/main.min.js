const mainElement=document.querySelector(".main"),headerElement=document.querySelector(".header"),quizMenu=mainElement.querySelector(".quiz-menu"),quizMain=mainElement.querySelector(".quiz-main"),quizEnd=mainElement.querySelector(".quiz-end"),menuOptionList=quizMenu.querySelector(".option-list"),answerOptionList=quizMain.querySelector(".option-list"),menuOptions=Array.from(menuOptionList.children),answerOptions=Array.from(answerOptionList.children),submitButton=quizMain.querySelector("#submit-button");let newQuiz,quizzes={};function Quiz(t){this.currentQuizData={},this.quizScore=0,this.quizProgressValue=0,this.quizTopic=t,this.startQuizAbout=()=>{this.currentQuizData=quizzes.filter((e=>e.title===t))[0],this.quizScore=0,this.quizProgressValue=1,switchQuizFrame("main"),renderQuizDetails()},this.getQuizDetails=t=>{const e=this.currentQuizData.questions[this.quizProgressValue],{question:i,options:n,answer:o}=e,r={question:i,options:n,answer:o};if(t in r!=!1)return r[t];console.error("No such detail available")},this.getTopicIcon=()=>this.currentQuizData.icon}function switchQuizFrame(t){const e=mainElement.querySelector({menu:".quiz-menu",main:".quiz-main",end:".quiz-end"}[t]);Array.from(mainElement.children).forEach((t=>{t.classList.toggle("none",t!==e)}))}function updateQuizTopicIndificators(){document.querySelectorAll(".quiz-topic").forEach((t=>{const e=t.querySelector("img"),i=t.querySelector("span");e.src=newQuiz.getTopicIcon(),e.setAttribute("data-icon",newQuiz.quizTopic.toLowerCase()),i.textContent=newQuiz.quizTopic}))}function renderQuizDetails(){updateQuizTopicIndificators();quizMain.querySelector("#question-text").textContent=newQuiz.getQuizDetails("question"),answerOptions.forEach((t=>{const e=newQuiz.getQuizDetails("options"),i=newQuiz.getQuizDetails("answer"),n=e[answerOptions.indexOf(t)];t.querySelector("[data-option-text]").textContent=n,n===i&&t.setAttribute("data-correct-option","")}))}function revealOptionStatus(t,e,i){const n=e?"dist/img/icon-correct.svg":"dist/img/icon-incorrect.svg";t.querySelector(".option__status-indicator").src=n,i&&t.classList.add(e?"option-list__item--picked-correctly":"option-list__item--picked-incorrectly")}fetch("/data.json").then((t=>{if(t.ok)return t.json();throw new Error("response was not received")})).then((t=>{quizzes=t.quizzes})).catch((t=>{console.error(t)})),menuOptions.forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault();const e=t.currentTarget.getAttribute("data-option-topic");newQuiz=new Quiz(e),newQuiz.startQuizAbout()}))})),submitButton.addEventListener("click",(t=>{let e;t.currentTarget.textContent="Next Question";const i=answerOptionList.querySelector("[data-correct-option]");answerOptions.forEach((t=>{const i=t.querySelector("input");i.checked&&(e=t),i.setAttribute("disabled",!0)}));const n=e.hasAttribute("data-correct-option");revealOptionStatus(e,n,!0),n?newQuiz.quizScore+=1:revealOptionStatus(i,!0,!1)}));
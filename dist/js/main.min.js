const mainElement=document.querySelector(".main"),headerElement=document.querySelector(".header"),quizMenu=mainElement.querySelector(".quiz-menu"),quizMain=mainElement.querySelector(".quiz-main"),quizEnd=mainElement.querySelector(".quiz-end"),menuOptionList=quizMenu.querySelector(".option-list"),answerOptionList=quizMain.querySelector(".option-list"),menuOptions=Array.from(menuOptionList.children),answerOptions=Array.from(answerOptionList.children),submitButton=quizMain.querySelector("#submit-button"),playAgainButton=quizEnd.querySelector("#play-again-button");let newQuiz,quizzes={};function Quiz(e){this.currentQuizData={},this.quizScore=0,this.quizProgressValue=0,this.quizTopic=e,this.startQuizAbout=()=>{this.currentQuizData=quizzes.filter((t=>t.title===e))[0],this.quizScore=0,this.quizProgressValue=1,switchQuizFrame("main"),resetOptions(),renderQuizDetails()},this.getQuizDetails=e=>{const t=this.currentQuizData.questions;console.log(t);const i=t[this.quizProgressValue],{question:n,options:o,answer:r}=i,u={question:n,options:o,answer:r,"quiz-length":t.length};if(e in u!=!1)return u[e];console.error("No such detail available")},this.getTopicIcon=()=>this.currentQuizData.icon}function switchQuizFrame(e){const t=mainElement.querySelector({menu:".quiz-menu",main:".quiz-main",end:".quiz-end"}[e]);Array.from(mainElement.children).forEach((e=>{e.classList.toggle("none",e!==t)}))}function updateQuizTopicIndificators(){document.querySelectorAll(".quiz-topic").forEach((e=>{const t=e.querySelector("img"),i=e.querySelector("span");t.src=newQuiz.getTopicIcon(),t.setAttribute("data-icon",newQuiz.quizTopic.toLowerCase()),i.textContent=newQuiz.quizTopic}))}function updateProgressIndicators(){const e=mainElement.querySelector("#question-index"),t=mainElement.querySelector("#quiz-progress");e.textContent=newQuiz.quizProgressValue,t.value=newQuiz.quizProgressValue}function renderEndingFrame(){const e=quizEnd.querySelector("#quiz-score"),t=quizEnd.querySelector("#quiz-length");e.textContent=newQuiz.quizScore,t.textContent=newQuiz.getQuizDetails("quiz-length")}function resetOptions(){const e=["data-pick","data-correct-option","data-revealed"];answerOptions.forEach((t=>{const i=t.querySelector("input");i.removeAttribute("disabled"),i.checked&&(i.checked=!1),e.forEach((e=>{t.hasAttribute(e)&&t.removeAttribute(e)}))}))}function renderQuizDetails(){updateProgressIndicators();quizMain.querySelector("#question-text").textContent=newQuiz.getQuizDetails("question"),answerOptions.forEach((e=>{const t=newQuiz.getQuizDetails("options"),i=newQuiz.getQuizDetails("answer"),n=t[answerOptions.indexOf(e)];e.querySelector("[data-option-text]").textContent=n,n===i&&e.setAttribute("data-correct-option","")}))}function isQuizCompleated(){const e=newQuiz.getQuizDetails("quiz-length");return newQuiz.quizProgressValue+1===e}function revealOptionStatus(e,t,i){e.setAttribute("data-revealed","");const n=t?"dist/img/icon-correct.svg":"dist/img/icon-incorrect.svg";e.querySelector(".option__status-indicator").src=n,i&&(e.dataset.pick=t?"correct":"incorrect")}fetch("/data.json").then((e=>{if(e.ok)return e.json();throw new Error("response was not received")})).then((e=>{quizzes=e.quizzes})).catch((e=>{console.error(e)})),menuOptions.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const t=e.currentTarget.getAttribute("data-option-topic");newQuiz=new Quiz(t),newQuiz.startQuizAbout(),updateQuizTopicIndificators()}))})),submitButton.addEventListener("click",(e=>{const t=quizMain.querySelector("#error-message"),i=answerOptionList.querySelector("input:checked");if(t.classList.toggle("hidden",i),!i)return;if("next"===submitButton.dataset.action){return isQuizCompleated()?(switchQuizFrame("end"),void renderEndingFrame()):(submitButton.setAttribute("data-action","submit"),newQuiz.quizProgressValue+=1,resetOptions(),void renderQuizDetails())}let n;submitButton.setAttribute("data-action","next"),submitButton.textContent="Next Question";const o=answerOptionList.querySelector("[data-correct-option]");answerOptions.forEach((e=>{const t=e.querySelector("input");t.checked&&(n=e),t.setAttribute("disabled",!0)}));const r=n.hasAttribute("data-correct-option");revealOptionStatus(n,r,!0),r?newQuiz.quizScore+=1:revealOptionStatus(o,!0,!1)})),playAgainButton.addEventListener("click",(e=>{switchQuizFrame("menu")}));const header=document.querySelector("header"),body=document.querySelector("body"),themeToggle=header.querySelector("#theme-toggle");let darkModeEnabled=JSON.parse(localStorage.getItem("quiz-dark-mode"))||!1;body.classList.toggle("dark-mode",darkModeEnabled),themeToggle.checked=darkModeEnabled;const togglePageTheme=()=>{darkModeEnabled=!darkModeEnabled,localStorage.setItem("quiz-dark-mode",darkModeEnabled),body.classList.toggle("dark-mode",darkModeEnabled)};themeToggle.addEventListener("change",togglePageTheme);
const mainElement=document.querySelector(".main"),headerElement=document.querySelector(".header"),quizMenu=mainElement.querySelector(".quiz-menu"),quizMain=mainElement.querySelector(".quiz-main"),quizEnd=mainElement.querySelector(".quiz-end"),menuOptionList=quizMenu.querySelector(".option-list"),mainOptionList=quizMain.querySelector(".option-list"),menuOptions=Array.from(menuOptionList.children),mainOptions=Array.from(mainOptionList.children),submitButton=quizMain.querySelector("#submit-button");let quizzes={},currentQuiz={},quizScore=0,quizProgressValue=1,quizTopic="";const markAsPicked=e=>{e.currentTarget.hasAttribute("data-picked")||(mainOptions.forEach((e=>{"false"!==e.hasAttribute("data-picked")&&e.removeAttribute("data-picked")})),e.currentTarget.setAttribute("data-picked",""))},getQuizTopic=e=>{e.preventDefault(),quizTopic=e.currentTarget.getAttribute("data-quiz-option"),startQuizAbout(quizTopic)},handleSubmitButton=()=>{if(!mainOptions.some((e=>e.hasAttribute("data-picked"))))return;quizMain.querySelectorAll("input").forEach((e=>{e.setAttribute("disabled","true")})),compareUserAnswer()};function switchQuizFrame(e){const t=mainElement.querySelector({menu:".quiz-menu",main:".quiz-main",end:".quiz-end"}[e]);Array.from(mainElement.children).forEach((e=>{e.classList.toggle("none",e!==t)}))}function updateProgressIndificators(){const e=quizMain.querySelector("#question-index"),t=quizMain.querySelector("#quiz-progress");quizProgressValue+=1,e=quizProgressValue,t.value=quizProgressValue}function updateQuizTopicIndificators(){document.querySelectorAll(".quiz-topic").forEach((e=>{const t=e.querySelector("img"),i=e.querySelector("span");t.src=currentQuiz.icon,t.setAttribute("data-icon",quizTopic.toLowerCase()),i.textContent=quizTopic}))}function getQuestionDetails(e){const t=currentQuiz.questions[quizProgressValue],{question:i,options:r,answer:n}=t,o={question:i,options:r,answer:n};if(e in o!=!1)return o[e];console.error("No such detail available")}function markCorrectAnswer(e,t,i){e===t?i.setAttribute("data-correct","true"):i.setAttribute("data-correct","false")}function changeCorrectIcon(e,t){e.querySelector(".option__status-indicator").src+={correct:"icon-correct.svg",incorrect:"icon-incorrect.svg"}[t]}function compareUserAnswer(){const e=mainOptionList.querySelector("li[data-picked]");if("true"===e.dataset.correct)quizScore+=1,e.classList.add("option-list__item--picked-correctly"),changeCorrectIcon(e,"correct");else{quizScore-=1,e.classList.add("option-list__item--picked-incorrectly"),changeCorrectIcon(e,"incorrect");changeCorrectIcon(mainOptions.filter((e=>"true"===e.dataset.correct))[0],"correct")}}function renderQuestionDetails(){const e=quizMain.querySelector("#question-text"),t=quizMain.querySelector(".option-list"),i=Array.from(t.children);e.textContent=getQuestionDetails("question"),i.forEach((e=>{const t=e.querySelector("[data-option-text]"),r=i.indexOf(e),n=getQuestionDetails("options")[r],o=getQuestionDetails("answer");t.textContent=n,markCorrectAnswer(n,o,e)}))}function startQuizAbout(e){currentQuiz=quizzes.filter((t=>t.title===e))[0],quizScore=0,quizProgressValue=1,switchQuizFrame("main"),updateQuizTopicIndificators(),renderQuestionDetails()}fetch("/data.json").then((e=>{if(e.ok)return e.json();throw new Error("response was not received")})).then((e=>{quizzes=e.quizzes})).catch((e=>{console.error(e)})),menuOptions.forEach((e=>{e.addEventListener("click",getQuizTopic)})),mainOptions.forEach((e=>{e.addEventListener("click",markAsPicked)})),submitButton.addEventListener("click",handleSubmitButton);